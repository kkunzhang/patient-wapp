{"version":3,"sources":[null,"webpack:////Users/mac/Desktop/patient-wapp/components/yz-canvas-poster/yz-canvas-poster.vue?62c5","webpack:////Users/mac/Desktop/patient-wapp/components/yz-canvas-poster/yz-canvas-poster.vue?b120","webpack:////Users/mac/Desktop/patient-wapp/components/yz-canvas-poster/yz-canvas-poster.vue?6599","uni-app:///components/yz-canvas-poster/yz-canvas-poster.vue","webpack:////Users/mac/Desktop/patient-wapp/components/yz-canvas-poster/yz-canvas-poster.vue?1009","webpack:////Users/mac/Desktop/patient-wapp/components/yz-canvas-poster/yz-canvas-poster.vue?ad8e"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACoE;AACL;AACa;;;AAG5E;AAC6M;AAC7M,gBAAgB,iNAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA+zB,CAAgB,8yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;ACan1B;AACA,0BADA;AAEA,MAFA,kBAEA;AACA;AACA,oBADA;AAEA,mBAFA;AAGA,oBAHA,EAGA;AACA,qBAJA,EAIA;AACA,oBALA,EAKA;AACA,qBANA,CAMA;AANA;AAQA,GAXA;AAYA;AACA;AACA,mBADA;AAEA,oBAFA,EADA;;AAKA;AACA,kBADA;AAEA,iBAFA,EALA;;AASA;AACA,iBADA;AAEA;AACA;AACA,6BAFA,CAEA;AACA,OALA,EATA;;AAgBA;AACA,iBADA;AAEA;AACA;AACA;AACA,OALA,EAhBA;;AAuBA;AACA,iBADA;AAEA;AACA;AACA;AACA,OALA,EAvBA;;AA8BA;AACA,iBADA;AAEA;AACA;AACA;AACA,OALA,EA9BA,EAZA;;;AAkDA,SAlDA,qBAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAzDA;AA0DA;AACA,QADA,kBACA;AACA;AACA;AACA,kBADA;AAEA,OAFA;AAGA,OAHA;AAIA,sBAJA;AAKA,uBALA;;AAOA;AACA,uBADA;AAEA,uBAFA;AAGA,uBAHA;AAIA,uBAJA;AAKA,uBALA;;AAOA;AACA,uBADA;AAEA,uBAFA;AAGA,uBAHA;AAIA,uBAJA;AAKA,uBALA;;AAOA;AACA;AACA;AACA;AACA,sBADA;AAEA,sBAFA;AAGA,sBAHA;;AAKA;AACA;AACA,KAlCA;AAmCA,gBAnCA,0BAmCA;AACA;AACA;AACA;AACA,KAvCA;AAwCA,aAxCA,uBAwCA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA;AACA;AACA;AACA;AACA;AACA,yBADA;AAEA,kCAFA;AAGA;AACA,4BAJA;AAKA,6BALA;AAMA;AACA;AACA;AACA;AACA;AACA,2CADA;AAEA;AACA;AACA;AACA;AACA,mCADA;AAEA,oCAFA;;AAIA,mBATA;;AAWA,eAdA,MAcA;AACA;AACA;AACA,aAxBA;AAyBA,oCAzBA;AA0BA,4CA1BA;;AA4BA,SAlCA;AAmCA;AACA;AACA,SArCA,EADA;;AAwCA,UAxCA;;AA0CA,KArFA,EA1DA,E;;;;;;;;;;;;;ACbA;AAAA;AAAA;AAAA;AAAsqC,CAAgB,2mCAAG,EAAC,C;;;;;;;;;;;ACA1rC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/yz-canvas-poster/yz-canvas-poster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./yz-canvas-poster.vue?vue&type=template&id=080413c4&\"\nvar renderjs\nimport script from \"./yz-canvas-poster.vue?vue&type=script&lang=js&\"\nexport * from \"./yz-canvas-poster.vue?vue&type=script&lang=js&\"\nimport style0 from \"./yz-canvas-poster.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/yz-canvas-poster/yz-canvas-poster.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./yz-canvas-poster.vue?vue&type=template&id=080413c4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./yz-canvas-poster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./yz-canvas-poster.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"content\" v-show=\"ifShow\" @click=\"changeIfShow\">\r\n    <canvas\r\n      class=\"canvas-img\"\r\n      :style=\"{ width: canvasWidth + 'px', height: canvasHeight + 'px' }\"\r\n      canvas-id=\"firstCanvas\"\r\n      id=\"firstCanvas\"\r\n      @longpress=\"canvasGet\"\r\n    ></canvas>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'yz-canvas-poster',\r\n  data() {\r\n    return {\r\n      canvasPath: '',\r\n      context: null,\r\n      windowWidth: 0, //屏幕可用宽度\r\n      windowHeight: 0, //屏幕可用高度\r\n      canvasWidth: 0, //图片宽度\r\n      canvasHeight: 0, //图片高度\r\n    }\r\n  },\r\n  props: {\r\n    ifShow: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    imageBg: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    myCanvasSize: {\r\n      type: Array,\r\n      default: () => {\r\n        //props传递数据的时候，默认值如果是数组或者对象，应该使用一个函数返回默认值\r\n        return [0.8, 16 / 9] //[0]为画布占屏幕宽度的比例，[1]为背景画布长宽比\r\n      },\r\n    },\r\n    imageHead: {\r\n      type: Array,\r\n      default: () => {\r\n        //props传递数据的时候，默认值如果是数组或者对象，应该使用一个函数返回默认值\r\n        return []\r\n      },\r\n    },\r\n    imageBody: {\r\n      type: Array,\r\n      default: () => {\r\n        //props传递数据的时候，默认值如果是数组或者对象，应该使用一个函数返回默认值\r\n        return []\r\n      },\r\n    },\r\n    textHead: {\r\n      type: Array,\r\n      default: () => {\r\n        //props传递数据的时候，默认值如果是数组或者对象，应该使用一个函数返回默认值\r\n        return []\r\n      },\r\n    },\r\n  },\r\n  created() {\r\n    const res = uni.getSystemInfoSync()\r\n    // console.log('SystemInf', res);\r\n    this.windowHeight = res.windowHeight\r\n    this.windowWidth = res.windowWidth\r\n    this.canvasWidth = this.windowWidth * this.myCanvasSize[0]\r\n    this.canvasHeight = this.canvasWidth * this.myCanvasSize[1]\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.context = uni.createCanvasContext('firstCanvas', this)\r\n      this.context.drawImage(\r\n        this.imageBg,\r\n        0,\r\n        0,\r\n        this.canvasWidth,\r\n        this.canvasHeight\r\n      )\r\n      this.context.drawImage(\r\n        this.imageHead[0],\r\n        this.imageHead[1],\r\n        this.imageHead[2],\r\n        this.imageHead[3],\r\n        this.imageHead[4]\r\n      )\r\n      this.context.drawImage(\r\n        this.imageBody[0],\r\n        this.imageBody[1],\r\n        this.imageBody[2],\r\n        this.imageBody[3],\r\n        this.imageBody[4]\r\n      )\r\n      this.context.setFontSize(this.textHead[4])\r\n      this.context.setTextBaseline('middle')\r\n      this.context.setFillStyle(this.textHead[3])\r\n      this.context.fillText(\r\n        this.textHead[0],\r\n        this.textHead[1],\r\n        this.textHead[2]\r\n      )\r\n      this.context.draw()\r\n      console.log('绘制完成')\r\n    },\r\n    changeIfShow() {\r\n      //触发一个更新事件\r\n      this.$emit('update:ifShow', false)\r\n      console.log('隐藏canvas')\r\n    },\r\n    canvasGet() {\r\n      console.log('下载canvas')\r\n      var that = this\r\n      uni.canvasToTempFilePath(\r\n        {\r\n          canvasId: 'firstCanvas',\r\n          success: function (res) {\r\n            // 在H5平台下，tempFilePath 为 base64\r\n            console.log(res.tempFilePath)\r\n            that.canvasPath = res.tempFilePath\r\n            uni.showModal({\r\n              title: '温馨提示',\r\n              content: '确定将图片保存到本地？',\r\n              // showCancel: false,\r\n              cancelText: '取消',\r\n              confirmText: '确定',\r\n              success: (res) => {\r\n                if (res.confirm) {\r\n                  console.log('用户点击确定')\r\n                  // H5不支持uni.saveImageToPhotosAlbum\r\n                  uni.saveImageToPhotosAlbum({\r\n                    filePath: that.canvasPath,\r\n                    success: function () {\r\n                      console.log('save success')\r\n                      that.changeIfShow()\r\n                      uni.showToast({\r\n                        title: '保存成功',\r\n                        duration: 2000,\r\n                      })\r\n                    },\r\n                  })\r\n                } else if (res.cancel) {\r\n                  console.log('用户点击取消')\r\n                }\r\n              },\r\n              fail: () => {},\r\n              complete: () => {},\r\n            })\r\n          },\r\n          fail: () => {\r\n            console.log('下载失败')\r\n          },\r\n        },\r\n        that\r\n      )\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.content {\r\n  position: fixed;\r\n  top: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: rgba(0, 0, 0, 0.2);\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: 2;\r\n  /* 设置显示层级 */\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./yz-canvas-poster.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./yz-canvas-poster.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1648715050769\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}