(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0816":function(n,e,t){"use strict";t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return c})),t.d(e,"a",(function(){return o}));var o={uAvatar:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-avatar/u-avatar")]).then(t.bind(null,"5e48"))}},a=function(){var n=this,e=n.$createElement;n._self._c},c=[]},3989:function(n,e,t){},7547:function(n,e,t){"use strict";(function(n){t("ecea");o(t("66fd"));var e=o(t("cc75"));function o(n){return n&&n.__esModule?n:{default:n}}wx.__webpack_require_UNI_MP_PLUGIN__=t,n(e.default)}).call(this,t("543d")["createPage"])},"98b4":function(n,e,t){"use strict";t.r(e);var o=t("e315"),a=t.n(o);for(var c in o)"default"!==c&&function(n){t.d(e,n,(function(){return o[n]}))}(c);e["default"]=a.a},b3f0:function(n,e,t){"use strict";var o=t("3989"),a=t.n(o);a.a},cc75:function(n,e,t){"use strict";t.r(e);var o=t("0816"),a=t("98b4");for(var c in a)"default"!==c&&function(n){t.d(e,n,(function(){return a[n]}))}(c);t("b3f0");var i,r=t("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"d19c1226",null,!1,o["a"],i);e["default"]=u.exports},e315:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=c(t("a34a")),a=t("0358");function c(n){return n&&n.__esModule?n:{default:n}}function i(n,e,t,o,a,c,i){try{var r=n[c](i),u=r.value}catch(s){return void t(s)}r.done?e(u):Promise.resolve(u).then(o,a)}function r(n){return function(){var e=this,t=arguments;return new Promise((function(o,a){var c=n.apply(e,t);function r(n){i(c,o,a,r,u,"next",n)}function u(n){i(c,o,a,r,u,"throw",n)}r(void 0)}))}}var u={name:"Login",data:function(){return{tips:null,isShow:!1,SessionKey:"",openid:"",unionid:"",nickName:"xiaowang",avatarUrl:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",code:"",pageOption:{backpage:"/pages/home/index",backtype:"1"},isCanUse:n.getStorageSync("isCanUse")||!0}},methods:{wxGetUserInfo:function(){var e=this;n.getSetting({success:function(t){t.authSetting["scope.userInfo"]?console.log("当前已授权"):console.log("当前未授权"),n.getUserProfile({desc:"Wexin",success:function(t){console.log(t),e.nickName=t.userInfo.nickName,e.avatarUrl=t.userInfo.avatarUrl,n.setStorageSync("nickName",t.userInfo.nickName),n.setStorageSync("avatarUrl",t.userInfo.avatarUrl);try{n.setStorageSync("isCanUse",!1),e.updateUserInfo(e.code)}catch(o){}},fail:function(e){console.log(e),n.showModal({title:"温馨提示",content:"检测到您未进行用户授权，将无法获得该小程序的完整体验！",showCancel:!1,success:function(n){}})}})}})},login:function(){var e=this;n.showLoading({title:"登录中..."}),n.login({provider:"weixin",success:function(t){e.code=t.code,n.hideLoading()},fail:function(e){console.log("失败"),n.showModal({title:"温馨提示",content:e.errMsg,showCancel:!1,success:function(n){}})}})},updateUserInfo:function(){var e=arguments,t=this;return r(o.default.mark((function c(){var i,r,u,s;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return i=e.length>0&&void 0!==e[0]?e[0]:"",r=t,u={nickName:r.nickName,headUrl:r.avatarUrl},o.next=5,(0,a.login)(u,i);case 5:s=o.sent,console.log(s.data),n.setStorageSync("unionid",s.data.unionid),n.setStorageSync("openId",s.data.openid),n.setStorageSync("token",s.data.accessToken),n.redirectTo({url:"/pages/login/loginPhone?backpage="+t.pageOption.backpage+"&backtype="+t.pageOption.backtype});case 11:case"end":return o.stop()}}),c)})))()}},onLoad:function(n){n&&(this.pageOption=n),this.login()}};e.default=u}).call(this,t("543d")["default"])}},[["7547","common/runtime","common/vendor"]]]);